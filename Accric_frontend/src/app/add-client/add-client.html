<div class="add-client-container">
  <div class="add-client-box">
    <div class="tabs">
      <button class="tab" [class.active]="activeTab === 'client-profile'"
        (click)="switchTab('client-profile', clientForm)">Client Profile</button>
      <button class="tab" [class.active]="activeTab === 'primary-contacts'"
        (click)="switchTab('primary-contacts', clientForm)">Primary Contacts</button>
      <button class="tab" [class.active]="activeTab === 'assessment-summary'"
        (click)="switchTab('assessment-summary', clientForm)">Assessment Summary</button>
      <button class="tab" [class.active]="activeTab === 'assessor-info'"
        (click)="switchTab('assessor-info', clientForm)">Assessor Information</button>
      <button class="tab" [class.active]="activeTab === 'scope-env'" (click)="switchTab('scope-env', clientForm)">Scope
        and Environment</button>
      <button class="tab" [class.active]="activeTab === 'compliance-results'"
        (click)="switchTab('compliance-results', clientForm)">Compliance Results</button>
      <button class="tab" [class.active]="activeTab === 'report-verification'"
        (click)="switchTab('report-verification', clientForm)">Report Verification</button>
    </div>

    <form #clientForm="ngForm" (ngSubmit)="onSubmit(clientForm)" class="client-form">

      <!-- CLIENT PROFILE TAB -->
      <div class="tab-content" *ngIf="activeTab === 'client-profile'">
        <div class="form-row">
          <div class="form-group">
            <label>Legal Entity Name*</label>
            <input type="text" name="legalEntityName" required [(ngModel)]="clientData.legalEntityName"
              #legalEntityName="ngModel" placeholder="Legal Entity Name" />
            <div class="error" *ngIf="legalEntityName.invalid && (legalEntityName.touched || showErrors)">
              <small>Please enter Legal Entity Name.</small>
            </div>
          </div>
          <div class="form-group">
            <label>Trading / Brand Name</label>
            <input type="text" name="brandName" [(ngModel)]="clientData.brandName" placeholder="Trading / Brand Name" />
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label>Country*</label>
            <input type="text" name="country" required [(ngModel)]="clientData.country" #country="ngModel"
              placeholder="Country" />
            <div class="error" *ngIf="country.invalid && (country.touched || showErrors)">
              <small>Please enter Country.</small>
            </div>
          </div>
          <div class="form-group">
            <label>State*</label>
            <input type="text" name="state" required [(ngModel)]="clientData.state" #state="ngModel"
              placeholder="State" />
            <div class="error" *ngIf="state.invalid && (state.touched || showErrors)">
              <small>Please enter State.</small>
            </div>
          </div>
          <div class="form-group">
            <label>City*</label>
            <input type="text" name="city" required [(ngModel)]="clientData.city" #city="ngModel" placeholder="City" />
            <div class="error" *ngIf="city.invalid && (city.touched || showErrors)">
              <small>Please enter City.</small>
            </div>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label>Street*</label>
            <input type="text" name="street" required [(ngModel)]="clientData.street" #street="ngModel"
              placeholder="Street" />
            <div class="error" *ngIf="street.invalid && (street.touched || showErrors)">
              <small>Please enter Street.</small>
            </div>
          </div>
          <div class="form-group">
            <label>Zip Code*</label>
            <input type="text" name="zipCode" required [(ngModel)]="clientData.zipCode" #zipCode="ngModel"
              placeholder="Zip Code" />
            <div class="error" *ngIf="zipCode.invalid && (zipCode.touched || showErrors)">
              <small>Please enter Zip Code.</small>
            </div>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label>Nature of Business</label>
            <input type="text" name="natureOfBusiness" [(ngModel)]="clientData.natureOfBusiness"
              placeholder="Nature of Business" />
          </div>
          <div class="form-group">
            <label>Website / Domain URL</label>
            <input type="text" name="website" [(ngModel)]="clientData.website" placeholder="Website / Domain URL" />
          </div>
          <div class="form-group">
            <label>Type of Business*</label>
            <input type="text" name="typeOfBusiness" required [(ngModel)]="clientData.typeOfBusiness"
              #typeOfBusiness="ngModel" placeholder="Type of Business" />
            <div class="error" *ngIf="typeOfBusiness.invalid && (typeOfBusiness.touched || showErrors)">
              <small>Please enter Type of Business.</small>
            </div>
          </div>
        </div>

        <div class="form-actions">
          <button type="button" class="btn-primary" (click)="saveAndContinue(clientForm)">
            <img src="/assets/icons/arrow_circle_down.png" alt="arrow_down" />
            <span>Save and Continue</span>
          </button>
        </div>
      </div>

      <!-- PRIMARY CONTACTS TAB -->
      <div class="tab-content" *ngIf="activeTab === 'primary-contacts'">
        <div class="form-row">
          <div class="form-group">
            <label>Name*</label>
            <input type="text" name="primaryName" required [(ngModel)]="clientData.primaryName" #primaryName="ngModel"
              placeholder="Enter Name" />
            <div class="error" *ngIf="primaryName.invalid && (primaryName.touched || showErrors)">
              <small>Please enter Name.</small>
            </div>
          </div>
          <div class="form-group">
            <label>Designation*</label>
            <input type="text" name="primaryDesignation" required [(ngModel)]="clientData.primaryDesignation"
              #primaryDesignation="ngModel" placeholder="Enter Designation" />
            <div class="error" *ngIf="primaryDesignation.invalid && (primaryDesignation.touched || showErrors)">
              <small>Please enter Designation.</small>
            </div>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label>Email*</label>
            <input type="email" name="primaryEmail" required [(ngModel)]="clientData.primaryEmail"
              #primaryEmail="ngModel" placeholder="Enter Email" />
            <div class="error" *ngIf="primaryEmail.invalid && (primaryEmail.touched || showErrors)">
              <small *ngIf="primaryEmail.errors?.['required']">Please enter Email.</small>
              <small *ngIf="primaryEmail.errors?.['email']">Enter a valid email.</small>
            </div>
          </div>
          <div class="form-group">
            <label>Phone*</label>
            <input type="text" name="primaryPhone" required [(ngModel)]="clientData.primaryPhone"
              #primaryPhone="ngModel" placeholder="Enter Phone" />
            <div class="error" *ngIf="primaryPhone.invalid && (primaryPhone.touched || showErrors)">
              <small>Please enter Phone.</small>
            </div>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label>Technical Contacts</label>
            <input type="text" name="technicalContact" [(ngModel)]="clientData.technicalContact"
              placeholder="Enter Technical Contacts" />
          </div>
          <div class="form-group">
            <label>Information Security Officer</label>
            <input type="text" name="iso" [(ngModel)]="clientData.iso" placeholder="Enter ISO" />
          </div>
        </div>

        <div class="form-row">
          <div class="form-group wide">
            <label>Client Signoff Authority*</label>
            <input type="text" name="clientSignoff" required [(ngModel)]="clientData.clientSignoff"
              #clientSignoff="ngModel" placeholder="Enter Client Signoff Authority" />
            <div class="error" *ngIf="clientSignoff.invalid && (clientSignoff.touched || showErrors)">
              <small>Please enter Client Signoff Authority.</small>
            </div>
          </div>
        </div>

        <div class="form-actions">
          <button type="button" class="go-back-btn" (click)="goBack()">
            <img src="/assets/icons/arrow_left_alt.png" alt="add_icon" />
          </button>
          <button type="button" class="btn-primary" (click)="saveAndContinue(clientForm)">
            <img src="/assets/icons/arrow_circle_down.png" alt="arrow_down" />
            <span>Save and Continue</span>
          </button>
        </div>
      </div>

      <!-- ASSESSMENT SUMMARY TAB -->
      <div class="tab-content" *ngIf="activeTab === 'assessment-summary'">
        <div class="form-row">
          <div class="form-group">
            <label>Assessment / Project Name</label>
            <input type="text" name="assessmentName" [(ngModel)]="clientData.assessmentName"
              placeholder="Assessment / Project Name" />
          </div>
          <div class="form-group">
            <label>Assessment Type</label>
            <input type="text" name="assessmentType" [(ngModel)]="clientData.assessmentType"
              placeholder="Assessment Type" />
          </div>
          <div class="form-group">
            <label>Assessment Category</label>
            <input type="text" name="assessmentCategory" [(ngModel)]="clientData.assessmentCategory"
              placeholder="Assessment Category" />
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label>Assessment Year</label>
            <input type="text" name="assessmentYear" [(ngModel)]="clientData.assessmentYear"
              placeholder="Assessment Year" />
          </div>
          <div class="form-group">
            <label>PCI DSS Version Applicable</label>
            <input type="text" name="pciVersion" [(ngModel)]="clientData.pciVersion"
              placeholder="PCI DSS Version Applicable" />
          </div>
          <div class="form-group">
            <label>Assessment Period Covered</label>
            <input type="text" name="periodCovered" [(ngModel)]="clientData.periodCovered"
              placeholder="Assessment Period Covered" />
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label>Audit Start Date*</label>
            <input type="date" name="auditStart" required [(ngModel)]="clientData.auditStart" #auditStart="ngModel" />
            <div class="error" *ngIf="auditStart.invalid && (auditStart.touched || showErrors)">
              <small>Audit Start Date is required</small>
            </div>
          </div>
          <div class="form-group">
            <label>Audit End Date*</label>
            <input type="date" name="auditEnd" required [(ngModel)]="clientData.auditEnd" #auditEnd="ngModel" />
            <div class="error" *ngIf="auditEnd.invalid && (auditEnd.touched || showErrors)">
              <small>Audit End Date is required</small>
            </div>
          </div>
          <div class="form-group">
            <label>Date of Report Submission</label>
            <input type="date" name="reportSubmittedDate" [(ngModel)]="clientData.reportSubmittedDate" />
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label>Audit Status</label>
            <select name="auditStatus" [(ngModel)]="clientData.auditStatus">
              <option value="" disabled selected>Select Status</option>
              <option value="REPORT_IN_REVIEW">Report In Review</option>
              <option value="COMPLETED">Completed</option>
              <option value="IN_PROGRESS">In Progress</option>
              <option value="NOT_STARTED">Not Started</option>
            </select>
          </div>

          <div class="form-group">
            <label>Certificate Issue Date</label>
            <input type="date" name="certificateIssueDate" [(ngModel)]="clientData.certificateIssueDate" />
          </div>
          <div class="form-group">
            <label>Certificate Expiry Date</label>
            <input type="date" name="certificateExpiryDate" [(ngModel)]="clientData.certificateExpiryDate" />
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label>Certificate Number / Unique ID</label>
            <input type="text" name="certificateNumberUniqueId" [(ngModel)]="clientData.certificateNumberUniqueId" />
          </div>
          <div class="form-group">
            <label>Classification</label>
            <input type="text" name="assessmentClassification" [(ngModel)]="clientData.assessmentClassification"
              placeholder="Assessment Classification" />
          </div>
          <div class="form-group">
            <label>Next Audit Due Date</label>
            <input type="date" name="nextAuditDueDate" [(ngModel)]="clientData.nextAuditDueDate" />
          </div>
        </div>

        <div class="form-actions">
          <button type="button" class="go-back-btn" (click)="goBack()">
            <img src="/assets/icons/arrow_left_alt.png" alt="add_icon" />
          </button>
          <button type="button" class="btn-primary" (click)="saveAndContinue(clientForm)">
            <img src="/assets/icons/arrow_circle_down.png" alt="arrow_down" />
            <span>Save and Continue</span>
          </button>
        </div>
      </div>
      <!-- Assessor Info Tab -->
      <div class="tab-content" *ngIf="activeTab === 'assessor-info'">
        <div class="form-row">
          <div class="form-group">
            <label>Name of QSA</label>
            <input type="text" name="nameOfQsa" [(ngModel)]="clientData.nameOfQsa" placeholder="Name of QSA" />
          </div>
          <div class="form-group">
            <label>QSA License/Certificate Number</label>
            <input type="text" name="qsaLicense" [(ngModel)]="clientData.qsaLicense"
              placeholder="QSA License/Certificate Number" />
          </div>
          <div class="form-group">
            <label>Audit Manager Reviewer Name</label>
            <input type="text" name="auditManagerReviewer" [(ngModel)]="clientData.auditManagerReviewer"
              placeholder="Audit Manager Reviewer Name" />
          </div>
        </div>
        <div class="form-actions">
          <button type="button" class="go-back-btn" (click)="goBack()">
            <img src="/assets/icons/arrow_left_alt.png" alt="add_icon">
          </button>
          <button type="button" class="btn-primary" (click)="saveAndContinue(clientForm)">
            <img src="/assets/icons/arrow_circle_down.png" alt="arrow_down">
            <span>Save and Continue</span>
          </button>
        </div>
      </div>

      <!-- Scope & Environment Tab -->
      <div class="tab-content" *ngIf="activeTab === 'scope-env'">
        <div class="form-row">
          <div class="form-group">
            <label>Scope of Assessment</label>
            <input type="text" name="scopeOfAssessment" [(ngModel)]="clientData.scopeOfAssessment"
              placeholder="Scope of Assessment" />
          </div>
          <div class="form-group">
            <label>Location in Scope</label>
            <input type="text" name="locationOfScope" [(ngModel)]="clientData.locationOfScope"
              placeholder="Location in Scope" />
          </div>
        </div>
        <div class="form-actions">
          <button type="button" class="go-back-btn" (click)="goBack()">
            <img src="/assets/icons/arrow_left_alt.png" alt="add_icon">
          </button>
          <button type="button" class="btn-primary" (click)="saveAndContinue(clientForm)">
            <img src="/assets/icons/arrow_circle_down.png" alt="arrow_down">
            <span>Save and Continue</span>
          </button>
        </div>
      </div>

      <!-- Compliance Results Tab -->
      <div class="tab-content" *ngIf="activeTab === 'compliance-results'">
        <div class="form-row">
          <div class="form-group">
            <label>Overall Compliance Status</label>
            <input type="text" name="overallComplianceStatus" [(ngModel)]="clientData.overallComplianceStatus"
              placeholder="Overall Compliance Status" />
          </div>
          <div class="form-group">
            <label>Compensating Controls Used</label>
            <select name="compensatingControl" [(ngModel)]="clientData.compensatingControl">
              <option value="" disabled selected>Select Status</option>
              <option value="completed">Completed</option>
              <option value="in-progress">In Progress</option>
              <option value="not-started">Not Started</option>
            </select>
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label>Customized Approach Used</label>
            <select name="customizedApproach" [(ngModel)]="clientData.customizedApproach">
              <option value="" disabled selected>Select Status</option>
              <option value="completed">Completed</option>
              <option value="in-progress">In Progress</option>
              <option value="not-started">Not Started</option>
            </select>
          </div>
          <div class="form-group">
            <label>Non-Conformities/Gap</label>
            <input type="text" name="nonConformitiesGap" [(ngModel)]="clientData.nonConformitiesGap"
              placeholder="Non-Conformities/Gap" />
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label>Identified</label>
            <input type="text" name="nonConformitiesGapIdentified" [(ngModel)]="clientData.nonConformitiesGapIdentified"
              placeholder="Identified" />
          </div>
          <div class="form-group">
            <label>Remediation Target Date</label>
            <input type="date" name="remediationTargetDate" [(ngModel)]="clientData.remediationTargetDate"
              placeholder="Remediation Target Date" />
          </div>
          <div class="form-group">
            <label>Revalidation Date</label>
            <input type="date" name="revalidationDate" [(ngModel)]="clientData.revalidationDate"
              placeholder="Revalidation Date" />
          </div>
        </div>
        <div class="form-actions">
          <button type="button" class="go-back-btn" (click)="goBack()">
            <img src="/assets/icons/arrow_left_alt.png" alt="add_icon">
          </button>
          <button type="button" class="btn-primary" (click)="saveAndContinue(clientForm)">
            <img src="/assets/icons/arrow_circle_down.png" alt="arrow_down">
            <span>Save and Continue</span>
          </button>
        </div>
      </div>



      <div class="tab-content" *ngIf="activeTab === 'report-verification'">
        <div class="form-row">

          <!-- Previous Report -->
          <div class="form-group">
            <label>Previous Report</label>

            <div class="report-file-box">

              <input type="text" [value]="previousReportFile ? previousReportFile.name : 'No file selected'" disabled />

              <div class="report-buttons">
                <button type="button" class="btn-upload" (click)="onUpload('previous')"><span>Upload</span></button>

                <button type="button" class="btn-preview" (click)="onPreview('previous')"
                  [disabled]="!previousReportFile">
                  <span>Preview</span>
                </button>

                <button type="button" class="btn-download" (click)="onDownload('previous')"
                  [disabled]="!previousReportFile">
                  <span>Download</span>
                </button>
              </div>
            </div>
          </div>

          <!-- Current Audit Report -->
          <div class="form-group">
            <label>Current Audit Report</label>

            <div class="report-file-box">

              <input type="text" [value]="currentReportFile ? currentReportFile.name : 'No file selected'" disabled />

              <div class="report-buttons">
                <button type="button" class="btn-upload" (click)="onUpload('current')"><span>Upload</span></button>

                <button type="button" class="btn-preview" (click)="onPreview('current')"
                  [disabled]="!currentReportFile">
                  <span>Preview</span>
                </button>

                <button type="button" class="btn-download" (click)="onDownload('current')"
                  [disabled]="!currentReportFile">
                  <span>Download</span>
                </button>
              </div>
            </div>
          </div>

        </div>

        <div class="form-actions">
          <button type="button" class="go-back-btn" (click)="goBack()">
            <img src="/assets/icons/arrow_left_alt.png" alt="add_icon">
          </button>
          <button type="submit" class="btn-primary">
            <span>Submit</span>
          </button>
        </div>

      </div>


    </form>
  </div>
</div>